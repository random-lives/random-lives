---
layout: default
---

<article class="life">
  <header class="life-header">
    <h1>{{ page.title }}</h1>
    <div class="life-meta">
      <p><strong>Born:</strong> {{ page.birth_date }}</p>
      {% if page.death_year != "present" %}<p><strong>Died:</strong> {{ page.death_date }} (Age {{ page.age_at_death }})</p>{% endif %}
      {% if page.region %}
        <p><strong>Birthplace:</strong>
          {% if page.subsubregion %}
            {{ page.subsubregion }}, {{ page.subregion }}, {{ page.region }}
          {% elsif page.subregion %}
            {{ page.subregion }}, {{ page.region }}
          {% else %}
            {{ page.region }}
          {% endif %}
        </p>
      {% elsif page.location %}
        <p><strong>Birthplace:</strong>
          <a href="{{ page.map_url }}" target="_blank" rel="noopener noreferrer">
            {{ page.location }}
          </a>
        </p>
      {% elsif page.country %}
        <p><strong>Birthplace:</strong>
          <a href="{{ page.map_url }}" target="_blank" rel="noopener noreferrer">
            {{ page.country }}
          </a>
        </p>
      {% endif %}
    </div>
  </header>

  {% if page.latitude and page.longitude %}
  <div class="life-map">
    <iframe
      width="100%"
      height="400"
      frameborder="0"
      style="border:0"
      referrerpolicy="no-referrer-when-downgrade"
      src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q={{ page.latitude }},{{ page.longitude }}&zoom=5"
      allowfullscreen>
    </iframe>
    <p class="map-caption">
      <a href="{{ page.map_url }}" target="_blank" rel="noopener noreferrer">View larger map</a>
    </p>
  </div>
  {% endif %}

  <div class="life-narrative">
    {{ content }}
  </div>

  {% if page.historical_notes %}
  <div class="historical-notes">
    <h2>Historical Context</h2>
    <ul>
      {% for note in page.historical_notes %}
      <li>{{ note }}</li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  <nav class="life-navigation">
    <a href="{{ '/' | relative_url }}">← Back to all lives</a>
  </nav>

  <nav class="life-nav-buttons">
    {% assign sorted_lives = site.lives | sort: "birth_year_numeric" %}
    {% assign current_index = -1 %}
    {% for life in sorted_lives %}
      {% if life.url == page.url %}
        {% assign current_index = forloop.index0 %}
      {% endif %}
    {% endfor %}

    {% if current_index > 0 %}
      {% assign prev_index = current_index | minus: 1 %}
      {% assign prev_life = sorted_lives[prev_index] %}
      <a href="{{ prev_life.url | relative_url }}" class="nav-btn">← Earlier life</a>
    {% else %}
      <span class="nav-btn disabled">← Earlier life</span>
    {% endif %}

    <a href="#" class="nav-btn" id="random-life-btn">Random life</a>

    {% assign next_index = current_index | plus: 1 %}
    {% if next_index < sorted_lives.size %}
      {% assign next_life = sorted_lives[next_index] %}
      <a href="{{ next_life.url | relative_url }}" class="nav-btn">Later life →</a>
    {% else %}
      <span class="nav-btn disabled">Later life →</span>
    {% endif %}
  </nav>

  <script>
    (function() {
      const allLives = [
        {% for life in site.lives %}
          "{{ life.url | relative_url }}"{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ];
      document.getElementById('random-life-btn').addEventListener('click', function(e) {
        e.preventDefault();
        const randomIndex = Math.floor(Math.random() * allLives.length);
        window.location.href = allLives[randomIndex];
      });
    })();
  </script>
</article>
